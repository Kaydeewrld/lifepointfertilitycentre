var $=jQuery.noConflict();$(document).ready(function($){$('.ajax_post').on('click',function(){var dbutton=$(this),data={'action':'loadmore','query':ajax_params.posts,'page':ajax_params.current_page,'p_type':ajax_params.post_type,'p_count':ajax_params.post_count,'p_cat':ajax_params.cat,};var ajax_grid=$('.ajax_grid');$.ajax({url:ajax_params.ajaxurl,data:data,type:'POST',beforeSend:function(xhr){dbutton.html('<span>Load More</span><div class="overlay"></div>');var max=$('.max').data("total");var cur=ajax_params.current_page;var cur=cur+1;console.log(cur+" "+max);if(cur==max){dbutton.hide();}},success:function(data){if(data){ajax_grid.append(data);ajax_params.current_page++;dbutton.html('<span>Load More</span><div class="overlay"></div>');if(ajax_params.current_page==ajax_params.max_page){dbutton.hide();}}else{dbutton.hide();}}});});$('.ajax_category.btn-all').on('click',function(){var dbutton=$('.ajax_post');ajax_params.current_page=0;dbutton.html('<span>Load More</span><div class="overlay"></div>');});$('.ajax_category').on('click',function(){$('.ajax_category').removeClass('active');$(this).addClass('active');var cat_id=$(this).data("id");var cat_title=$(this).data("title");var max_post=$(this).data("max");var dbutton=$('.ajax_post');dbutton.attr('data-max',max_post);var catbutton=$(this);var data={'action':'loadmore','query':ajax_params.posts,'page':0,'p_type':ajax_params.post_type,'p_count':ajax_params.post_count,'p_cat':cat_id};var ajax_grid=$('.ajax_grid');$.ajax({url:ajax_params.ajaxurl,data:data,type:'POST',beforeSend:function(xhr){catbutton.html('<span>Loading...</span><div class="overlay"></div>');},success:function(data){if(data){ajax_grid.html(data);catbutton.html('<span>'+cat_title+'</span><div class="overlay"></div>');$('.ajax_post').attr("data-id",cat_id);ajax_params.current_page=1;ajax_params.cat=cat_id
$('.ajax_post').show();if(max_post==1){dbutton.hide();}}else{if(max_post==1){ajax_grid.html('<div class="col-lg-12 text-center">No Post Available</div>');}
catbutton.html('<span>'+cat_title+'</span><div class="overlay"></div>');dbutton.hide();}}});});});